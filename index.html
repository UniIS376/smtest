<!DOCTYPE html>
<html>
<body>
<h2>POST + HTML Smuggling Payload 테스트</h2>
<button onclick="sendSmugglePayload()">Send Smuggling Payload</button>

<script>
function sendSmugglePayload() {
  // === HTML Smuggling 악성코드 예시(안전한 버전) ===
  // Blob + Base64 + 자동 다운로드
  const smugglePayload = `
<script>
  const b64 = "VGhpcyBpcyBhIHNhZmUgZmlsZSBmb3IgSFRNTCBTbXVnZ2xpbmcgdGVzdC4K"; 
  const bytes = atob(b64);
  const arr = new Uint8Array(bytes.length);
  for (let i = 0; i < bytes.length; i++) arr[i] = bytes.charCodeAt(i);
  const blob = new Blob([arr], {type: "text/plain"});
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "safe_payload.txt";
  a.click();
</script>`;

  fetch("/.netlify/functions/receive", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify({
      type: "html-smuggling-test",
      payload: smugglePayload
    })
  })
    .then(r => r.text())
    .then(console.log)
    .catch(console.error);
}
</script>
</body>
</html>
