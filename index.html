<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>POST + HTML Smuggling Payload 테스트</title>
</head>
<body>
  <h2>POST + HTML Smuggling Payload 테스트</h2>
  <p>버튼을 누르면 HTML Smuggling 형태의 코드 조각을 POST Body에 담아서 Netlify Functions로 전송합니다.</p>

  <button onclick="sendSmugglingPayload()">Send Smuggling Payload</button>

  <script>
  function sendSmugglingPayload() {
    // HTML Smuggling 스타일의 코드(실행은 안 하고 문자열로만 보냄)
    const smugglePayload = `
const b64 = "WDVPIVAlQEFQWzRcUFpYNTQoUF4pN0NDKTd9JEVJQ0FSLVNUQU5EQVJELUFOVElWSVJVUy1URVNULUZJTEUhJEgrSCo=";
// EICAR 테스트 파일
const bytes = atob(b64);
const arr = new Uint8Array(bytes.length);
for (let i = 0; i < bytes.length; i++) arr[i] = bytes.charCodeAt(i);
const blob = new Blob([arr], { type: "application/octet-stream" });
const a = document.createElement("a");
a.href = URL.createObjectURL(blob);
a.download = "eicar.com";
a.click();
`;

    fetch("https://sectestpage123.netlify.app/.netlify/functions/receive", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        type: "html-smuggling-test",
        payload: smugglePayload
      })
    })
      .then(r => r.text())
      .then(text => {
        console.log("Function response:", text);
        alert("POST 전송 완료");
      })
      .catch(err => {
        console.error("Error:", err);
        alert("POST 에러: " + err);
      });
  }
  </script>
</body>
</html>


